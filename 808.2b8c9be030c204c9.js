"use strict";(self.webpackChunkmovie_discovery_app=self.webpackChunkmovie_discovery_app||[]).push([[808],{9808:(b,m,n)=>{n.r(m),n.d(m,{MovieModule:()=>j});var a=n(177),l=n(580),e=n(8699),h=n(4945),p=n(345),v=n(4196),d=n(7540),u=n(8791);function f(i,r){if(1&i&&(e.j41(0,"div",11)(1,"div",12),e.nrm(2,"iframe",13),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("src",t.trailerUrl,e.f$h)}}function g(i,r){if(1&i&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"strong"),e.EFF(4),e.k0s(),e.j41(5,"div",17),e.EFF(6),e.k0s()()()()),2&i){const t=r.$implicit;e.R7$(4),e.JRh(t.name),e.R7$(2),e.SpI("as ",t.character,"")}}function _(i,r){if(1&i){const t=e.RV6();e.j41(0,"app-movie-carousel",18),e.bIt("open",function(o){e.eBV(t);const c=e.XpG(2);return e.Njj(c.openDetail(o))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("items",t.similar)}}function M(i,r){if(1&i&&(e.j41(0,"section",3)(1,"h1",4),e.EFF(2),e.k0s(),e.j41(3,"p",5),e.EFF(4),e.k0s(),e.DNE(5,f,3,1,"div",6),e.j41(6,"h3",7),e.EFF(7,"Cast"),e.k0s(),e.j41(8,"div",8),e.DNE(9,g,7,2,"div",9),e.nI1(10,"slice"),e.k0s(),e.j41(11,"h3",7),e.EFF(12,"Similar Movies"),e.k0s(),e.DNE(13,_,1,1,"app-movie-carousel",10),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.JRh(t.movie.title),e.R7$(2),e.JRh(t.movie.overview),e.R7$(1),e.Y8G("ngIf",t.trailerUrl),e.R7$(4),e.Y8G("ngForOf",e.brH(10,5,t.cast,0,12)),e.R7$(4),e.Y8G("ngIf",!t.loading&&!t.error&&t.similar.length>0)}}function y(i,r){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"h3"),e.EFF(2,"Movie Results"),e.k0s(),e.j41(3,"app-movie-carousel",18),e.bIt("open",function(o){e.eBV(t);const c=e.XpG(2);return e.Njj(c.openDetail(o))}),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("items",t.searchMovies)}}function x(i,r){if(1&i&&(e.j41(0,"div")(1,"h3"),e.EFF(2,"Actor Results"),e.k0s(),e.nrm(3,"app-movie-carousel",23),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("items",t.searchActors)}}function R(i,r){1&i&&(e.j41(0,"div",24),e.nrm(1,"app-skeleton-loader",25),e.k0s()),2&i&&(e.R7$(1),e.Y8G("count",5))}function D(i,r){if(1&i&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(1),e.SpI("Error: ",t.searchError,"")}}function F(i,r){if(1&i&&(e.j41(0,"section",19),e.DNE(1,y,4,1,"div",20),e.DNE(2,x,4,1,"div",20),e.DNE(3,R,2,1,"div",21),e.DNE(4,D,2,1,"div",22),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("ngIf","movie"===t.searchType&&t.searchMovies.length),e.R7$(1),e.Y8G("ngIf","actor"===t.searchType&&t.searchActors.length),e.R7$(1),e.Y8G("ngIf",t.searchLoading),e.R7$(1),e.Y8G("ngIf",t.searchError)}}let G=(()=>{class i{constructor(t,s,o,c,E){this.route=t,this.tmdb=s,this.router=o,this.sanitizer=c,this.searchService=E,this.cast=[],this.similar=[],this.loading=!0,this.searchActive=!1,this.searchType="movie",this.searchMovies=[],this.searchActors=[],this.searchLoading=!1,this.searchError=""}ngOnInit(){this.searchService.search$.subscribe(s=>{this.searchActive=!!s.query,this.searchType=s.type,this.searchLoading=s.loading,this.searchError=s.error,"movie"===s.type?(this.searchMovies=s.results,this.searchActors=[]):"actor"===s.type&&(this.searchActors=s.results,this.searchMovies=[]),s.query||(this.searchActive=!1,this.searchMovies=[],this.searchActors=[])});const t=Number(this.route.snapshot.paramMap.get("id"));this.load(t)}load(t){this.loading=!0,this.tmdb.getMovie(t).subscribe({next:s=>{this.movie=s},error:s=>{this.error=s.message}}),this.tmdb.getMovieVideos(t).subscribe({next:s=>{const o=(s.results||[]).find(c=>"YouTube"===c.site&&"Trailer"===c.type)||(s.results||[])[0];o&&(this.trailerUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${o.key}`))}}),this.tmdb.getCredits(t).subscribe({next:s=>this.cast=s.cast||[]}),this.tmdb.getSimilar(t).subscribe({next:s=>this.similar=s.results||[]}),this.loading=!1}openDetail(t){this.router.navigate(["/movie",t]).then(()=>{this.load(t)})}getKnownForNames(t){return t.known_for&&t.known_for.length?t.known_for.map(s=>s.title?s.title:s.name).join(", "):""}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(l.nX),e.rXU(h.L),e.rXU(l.Ix),e.rXU(p.up),e.rXU(v.S))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-movie-detail"]],decls:3,vars:2,consts:[[1,"details","container"],["class","movie-detail container py-4",4,"ngIf"],["class","search-results container py-4",4,"ngIf"],[1,"movie-detail","container","py-4"],[1,"mb-3","text-center"],[1,"lead","text-muted"],["class","trailer my-4",4,"ngIf"],[1,"mt-5"],[1,"row","row-cols-2","row-cols-sm-3","row-cols-md-4","row-cols-lg-6","g-3"],["class","col text-center",4,"ngFor","ngForOf"],[3,"items","open",4,"ngIf"],[1,"trailer","my-4"],[1,"ratio","ratio-16x9"],["allowfullscreen","",3,"src"],[1,"col","text-center"],[1,"card","border-0"],[1,"card-body","p-2"],[1,"text-muted","small"],[3,"items","open"],[1,"search-results","container","py-4"],[4,"ngIf"],["class","text-muted mt-2",4,"ngIf"],["class","text-danger mt-2",4,"ngIf"],["type","actor",3,"items"],[1,"text-muted","mt-2"],[3,"count"],[1,"text-danger","mt-2"]],template:function(s,o){1&s&&(e.j41(0,"div",0),e.DNE(1,M,14,9,"section",1),e.DNE(2,F,5,4,"section",2),e.k0s()),2&s&&(e.R7$(1),e.Y8G("ngIf",!o.searchActive),e.R7$(1),e.Y8G("ngIf",o.searchActive))},dependencies:[a.Sq,a.bT,d.W,u.w,a.P9],styles:[".details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a3d8f4 0%,#c1e7ff 100%);color:#03396c}"]})}}return i})();const C=[{path:"",component:(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-movie"]],decls:1,vars:0,template:function(s,o){1&s&&e.nrm(0,"app-movie-detail")},dependencies:[G]})}}return i})()}];let I=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[l.iI.forChild(C),l.iI]})}}return i})();var $=n(3887);let j=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[a.MD,I,$.G]})}}return i})()}}]);